# RSS Daily AI Digest - 架构概览

## 一句话描述

每日自动抓取 150+ AI 相关 RSS 源 → AI 摘要 + 智能推荐 → Markdown 归档 + 钉钉推送。

## 整体架构

```
                    ┌─────────────────────┐
                    │   触发方式           │
                    │  /rss-digest (手动)  │
                    │  launchd    (定时)   │
                    └─────────┬───────────┘
                              │
                    ┌─────────▼───────────┐
                    │  rss-feeds.md       │  ← 唯一数据源（150+ feed URL）
                    │  解析为 feeds.json   │
                    └─────────┬───────────┘
                              │
                    ┌─────────▼───────────┐
                    │  并行抓取 RSS        │  25 并发 / 15s 超时 / 自动重试
                    │  → raw-items.json   │
                    └─────────┬───────────┘
                              │
                    ┌─────────▼───────────┐
                    │  去重 + 时间过滤     │  48h 窗口 / GUID 去重
                    │  → filtered-items   │
                    └─────────┬───────────┘
                              │
              ┌───────────────┼───────────────┐
              │ 手动模式       │               │ 定时模式
              │ Claude Code    │               │ Claude API
              │ 交互式摘要     │               │ 批量摘要
              └───────┬───────┘               └───────┬───────┘
                      │                               │
                      └───────────┬───────────────────┘
                                  │
                    ┌─────────────▼───────────┐
                    │  输出                    │
                    │  ├─ MD 归档（全量报告）   │  → ~/Documents/ai-digest-archive/
                    │  └─ 钉钉推送（精选 Top10）│  → Webhook
                    └─────────────────────────┘
```

## 两种运行模式

| | 手动模式 | 定时模式 |
|---|---------|---------|
| 触发 | `/rss-digest` | launchd 每日 8:00 |
| AI 引擎 | Claude Code（对话中） | Claude API (Sonnet) |
| 人工干预 | 可调整推荐结果 | 全自动 |
| 适用场景 | 按需查看、调试 | 日常订阅 |

## 核心输出

**Markdown 日报** = Smart Recommendations（AI 精选 Top 10）+ 九大分类全量内容

**钉钉消息** = 仅推送 Smart Recommendations 精选部分

## 技术选型

- TypeScript + Node.js 原生 fetch（无重型依赖）
- RSS/Atom 正则解析（无 XML 库）
- 唯一运行时依赖：`tsx`
