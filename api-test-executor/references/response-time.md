# 响应时间断言规范

响应时间阈值支持三种方式设定，按优先级：**用例指定 > 接口特征推断 > 全局默认值**。

## 方式一：用例级别指定

```markdown
- 响应时间要求：@responseTimeLt(500)
```

或 JSON 格式：
```json
{ "expected": { "status": 200, "responseTime": "@responseTimeLt(500)", "body": {} } }
```

## 方式二：按接口特征自动推断

用例未指定时，根据接口特征分配默认阈值：

| 接口特征 | 识别方式 | 默认阈值 | 理由 |
|---------|---------|---------|------|
| 认证登录 | 路径含 `login`/`auth`/`token` | 1000ms | 可能涉及加密/外部验证 |
| 简单查询 | `GET` + 路径不含 `list`/`search`/`export` | 500ms | 单条数据读取 |
| 列表查询 | `GET` + 路径含 `list`/`search` 或有分页参数 | 2000ms | 分页和条件查询 |
| 数据写入 | `POST`/`PUT`/`PATCH`（非特殊路径） | 1000ms | 写入+校验 |
| 删除操作 | `DELETE` | 500ms | 通常是简单操作 |
| 文件上传 | 请求含 `multipart/form-data` | 10000ms | 文件大小不可控 |
| 数据导出 | 路径含 `export`/`download`/`report` | 30000ms | 大量数据处理 |
| 数据导入/洗数据 | 路径含 `import`/`batch`/`sync`/`migrate` | 不限制 | 批量操作，跳过断言 |
| 聚合统计 | 路径含 `statistics`/`summary`/`dashboard` | 5000ms | 复杂计算 |

## 方式三：全局默认值

特征无法匹配时，使用 `3000ms`。可在环境配置中覆盖：

```markdown
- DEFAULT_RESPONSE_TIME: 3000
```

## 报告中的展示

```
| # | 用例 | 接口 | 耗时 | 阈值 | 阈值来源 | 结果 |
|---|------|------|------|------|---------|------|
| 1 | 用户登录 | POST /login | 320ms | 1000ms | 自动推断(认证) | ✅ |
| 2 | 订单列表 | GET /orders | 1850ms | 2000ms | 自动推断(列表) | ✅ |
| 3 | 数据导出 | GET /export | 8500ms | 30000ms | 自动推断(导出) | ✅ |
| 4 | 商品详情 | GET /products/1 | 2100ms | 500ms | 用例指定 | ❌ |
```
